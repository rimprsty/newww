<!DOCTYPE html>
<html>
<head>
<title>NOVA BOT</title>
<style>
body{margin:0;background:#ff0000;color:white;font-family:arial}.header{text-align:center;padding:30px;background:#cc0000}h1{font-size:40px;margin:0}.login-box{width:300px;margin:100px auto;background:white;padding:30px;border-radius:10px}input,button{width:100%;padding:10px;margin:10px 0;box-sizing:border-box}input{border:2px solid #ff0000}button{background:#ff0000;color:white;border:none;cursor:pointer}.dashboard{display:none;padding:20px}.stat{display:inline-block;background:white;color:#ff0000;padding:20px;margin:10px;border-radius:10px}.section{margin:20px 0;background:white;padding:20px;border-radius:10px;color:#333}.number-item{background:#ffe6e6;margin:5px 0;padding:10px;border-radius:5px}.alert{position:fixed;top:20px;right:20px;background:#ff0000;padding:15px;border-radius:5px;display:none}
</style>
</head>
<body>
<div class="header">
<h1>NOVA BOT MANAGER</h1>
</div>
<div class="login-box" id="loginBox">
<h2 style="color:#ff0000">LOGIN</h2>
<input type="password" id="pass" placeholder="Password">
<button onclick="login()">LOGIN</button>
</div>
<div class="dashboard" id="dashboard">
<div>
<div class="stat">
<div style="font-size:30px" id="total">0</div>
<div>TOTAL</div>
</div>
<div class="stat">
<div style="font-size:30px" id="black">0</div>
<div>BLACKLIST</div>
</div>
</div>
<div class="section">
<h2 style="color:#ff0000">ADD NUMBER</h2>
<input type="text" id="phone" placeholder="628xxxxxxx">
<select id="type">
<option value="nomor">ALLOWED</option>
<option value="blacklist">BLACKLIST</option>
</select>
<button onclick="addNum()">ADD</button>
</div>
<div class="section">
<h2 style="color:#ff0000">NUMBERS</h2>
<input type="text" placeholder="Search..." id="search" onkeyup="searchNum()">
<div id="list"></div>
</div>
</div>
<div class="alert" id="alert"></div>
<script>
const TOKEN='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';
let nums=[];

function login(){
if(document.getElementById('pass').value==='novamdrimkyoko'){
document.getElementById('loginBox').style.display='none';
document.getElementById('dashboard').style.display='block';
load();
showMsg('SUCCESS');
}else{
showMsg('WRONG PASSWORD');
}}

async function load(){
showMsg('LOADING');
try{
const res1=await fetch('https://raw.githubusercontent.com/rimprsty/novadb/main/nomor');
const res2=await fetch('https://raw.githubusercontent.com/rimprsty/novadb/main/blacklist');
const data1=await res1.json();
const data2=await res2.json();
nums=[];
if(data1.nomor)data1.nomor.forEach(p=>nums.push({n:p,t:'nomor'}));
if(data2.nomor)data2.nomor.forEach(p=>nums.push({n:p,t:'blacklist'}));
update();
showMsg('LOADED');
}catch{showMsg('ERROR');}}

async function addNum(){
const p=document.getElementById('phone').value.trim();
const t=document.getElementById('type').value;
if(!p){showMsg('INVALID');return;}
const url=`https://api.github.com/repos/rimprsty/novadb/contents/${t}`;
try{
const res=await fetch(url,{headers:{'Authorization':`token ${TOKEN}`}});
const data=await res.json();
const j=JSON.parse(atob(data.content));
if(!j.nomor.includes(p)){
j.nomor.push(p);
await fetch(url,{method:'PUT',headers:{'Authorization':`token ${TOKEN}`,'Content-Type':'application/json'},body:JSON.stringify({message:'add',content:btoa(JSON.stringify(j)),sha:data.sha})});
showMsg('ADDED');
document.getElementById('phone').value='';
load();
}else{showMsg('EXISTS');}}
catch{showMsg('NETWORK ERROR');}}

async function delNum(p,t){
if(!confirm(`DELETE ${p}?`))return;
const url=`https://api.github.com/repos/rimprsty/novadb/contents/${t}`;
try{
const res=await fetch(url,{headers:{'Authorization':`token ${TOKEN}`}});
const data=await res.json();
const j=JSON.parse(atob(data.content));
j.nomor=j.nomor.filter(n=>n!==p);
await fetch(url,{method:'PUT',headers:{'Authorization':`token ${TOKEN}`,'Content-Type':'application/json'},body:JSON.stringify({message:'delete',content:btoa(JSON.stringify(j)),sha:data.sha})});
showMsg('DELETED');
load();
}catch{showMsg('ERROR');}}

function update(){
document.getElementById('total').textContent=nums.length;
document.getElementById('black').textContent=nums.filter(x=>x.t==='blacklist').length;
let html='';
nums.forEach((num,i)=>{
html+=`<div class="number-item">
<div>${num.n} <span style="color:${num.t==='blacklist'?'#ff0000':'#00aa00'}">${num.t.toUpperCase()}</span></div>
<button onclick="delNum('${num.n}','${num.t}')" style="background:#ff0000;color:white;border:none;padding:5px">DELETE</button>
</div>`;
});
document.getElementById('list').innerHTML=html;}

function searchNum(){
const q=document.getElementById('search').value.toLowerCase();
document.querySelectorAll('.number-item').forEach(item=>{
item.style.display=item.textContent.toLowerCase().includes(q)?'block':'none';
});}

function showMsg(m){
const a=document.getElementById('alert');
a.textContent=m;
a.style.display='block';
setTimeout(()=>a.style.display='none',2000);}
</script>
</body>
</html>
