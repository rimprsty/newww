<!DOCTYPE html>
<html>
<head>
<title>NOVA MANAGER</title>
<style>
body{margin:0;background:#ff0000;color:white;font-family:arial}.header{text-align:center;padding:30px}h1{font-size:48px;margin:0}.login-box{width:300px;margin:100px auto;background:white;padding:30px;border-radius:10px;text-align:center}input{width:100%;padding:10px;margin:10px 0;border:2px solid #ff0000;border-radius:5px}button{width:100%;padding:10px;background:#ff0000;color:white;border:none;border-radius:5px;cursor:pointer}.dashboard{display:none;padding:20px}.stat-box{display:inline-block;background:white;color:#ff0000;padding:20px;margin:10px;border-radius:10px}.form-box{background:white;color:#333;padding:20px;border-radius:10px;margin:20px 0}.number-list{max-height:400px;overflow-y:auto}.number-item{background:#ffe6e6;margin:5px 0;padding:10px;border-radius:5px;display:flex;justify-content:space-between}.alert{position:fixed;top:20px;right:20px;background:white;color:#ff0000;padding:15px;border-radius:5px;display:none}
</style>
</head>
<body>
<div class="header">
<h1>NOVA BOT</h1>
</div>
<div class="login-box" id="loginBox">
<h2 style="color:#ff0000">LOGIN</h2>
<input type="password" id="pass" placeholder="Password">
<button onclick="login()">ENTER</button>
</div>
<div class="dashboard" id="dashboard">
<div>
<div class="stat-box">
<div style="font-size:36px" id="total">0</div>
<div>TOTAL</div>
</div>
<div class="stat-box">
<div style="font-size:36px" id="black">0</div>
<div>BLACKLIST</div>
</div>
</div>
<div class="form-box">
<h2 style="color:#ff0000">ADD NUMBER</h2>
<input type="text" id="phone" placeholder="628xxxxxxx">
<select id="type" style="width:100%;padding:10px;margin:10px 0;border:2px solid #ff0000;border-radius:5px">
<option value="nomor">ALLOWED</option>
<option value="blacklist">BLACKLIST</option>
</select>
<button onclick="add()">ADD NUMBER</button>
<button onclick="load()" style="background:#666">REFRESH</button>
</div>
<div class="form-box">
<h2 style="color:#ff0000">NUMBERS LIST</h2>
<input type="text" placeholder="Search..." id="search" oninput="search()" style="width:100%;padding:10px;margin-bottom:10px;border:2px solid #ff0000;border-radius:5px">
<div class="number-list" id="list"></div>
</div>
</div>
<div class="alert" id="alert"></div>
<script>
const TOKEN='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';
let nums=[];

function login(){
if(document.getElementById('pass').value==='novamdrimkyoko'){
document.getElementById('loginBox').style.display='none';
document.getElementById('dashboard').style.display='block';
load();
msg('SUCCESS');
}else{
msg('WRONG PASSWORD');
}}

async function load(){
msg('LOADING');
try{
const r1=await fetch('https://raw.githubusercontent.com/rimprsty/novadb/main/nomor');
const r2=await fetch('https://raw.githubusercontent.com/rimprsty/novadb/main/blacklist');
const d1=await r1.json();
const d2=await r2.json();
nums=[];
if(d1.nomor)d1.nomor.forEach(p=>nums.push({n:p,t:'nomor'}));
if(d2.nomor)d2.nomor.forEach(p=>nums.push({n:p,t:'blacklist'}));
update();
msg('LOADED');
}catch{msg('ERROR');}}

async function add(){
const p=document.getElementById('phone').value.trim();
const t=document.getElementById('type').value;
if(!p||p.length<10){msg('INVALID');return;}
const url=`https://api.github.com/repos/rimprsty/novadb/contents/${t}`;
try{
const res=await fetch(url,{headers:{'Authorization':`token ${TOKEN}`}});
if(!res.ok){msg('GITHUB ERROR');return;}
const data=await res.json();
const content=atob(data.content);
const j=JSON.parse(content);
if(!j.nomor)j.nomor=[];
if(!j.nomor.includes(p)){
j.nomor.push(p);
const put=await fetch(url,{
method:'PUT',
headers:{
'Authorization':`token ${TOKEN}`,
'Content-Type':'application/json'
},
body:JSON.stringify({
message:`add ${p}`,
content:btoa(JSON.stringify(j)),
sha:data.sha
})
});
if(put.ok){
msg('SUCCESS');
document.getElementById('phone').value='';
load();
}else{
msg('UPDATE FAILED');
}}
else{msg('ALREADY EXISTS');}}
catch(e){
console.error(e);
msg('NETWORK ERROR');
}}

async function del(p,t){
if(!confirm(`DELETE ${p}?`))return;
const url=`https://api.github.com/repos/rimprsty/novadb/contents/${t}`;
try{
const res=await fetch(url,{headers:{'Authorization':`token ${TOKEN}`}});
const data=await res.json();
const j=JSON.parse(atob(data.content));
j.nomor=j.nomor.filter(n=>n!==p);
const put=await fetch(url,{
method:'PUT',
headers:{
'Authorization':`token ${TOKEN}`,
'Content-Type':'application/json'
},
body:JSON.stringify({
message:`delete ${p}`,
content:btoa(JSON.stringify(j)),
sha:data.sha
})
});
if(put.ok){
msg('DELETED');
load();
}else{
msg('DELETE FAILED');
}}
catch{msg('ERROR');}}

function update(){
document.getElementById('total').textContent=nums.length;
document.getElementById('black').textContent=nums.filter(x=>x.t==='blacklist').length;
let h='';
nums.forEach((n,i)=>{
h+=`<div class="number-item">
<div>${n.n} <span style="color:${n.t==='blacklist'?'#ff0000':'green'}">[${n.t}]</span></div>
<button onclick="del('${n.n}','${n.t}')" style="background:#ff0000;color:white;border:none;padding:5px 10px;border-radius:3px">DELETE</button>
</div>`;
});
document.getElementById('list').innerHTML=h;}

function search(){
const q=document.getElementById('search').value.toLowerCase();
document.querySelectorAll('.number-item').forEach(item=>{
item.style.display=item.textContent.toLowerCase().includes(q)?'flex':'none';
});}

function msg(m){
const a=document.getElementById('alert');
a.textContent=m;
a.style.display='block';
setTimeout(()=>a.style.display='none',2000);}

document.addEventListener('keydown',e=>{
if(e.key==='Enter'&&document.getElementById('loginBox').style.display!=='none')login();
if(e.key==='Escape')document.getElementById('search').focus();
});
</script>
</body>
</html>
